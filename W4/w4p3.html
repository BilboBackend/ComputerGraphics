<!DOCTYPE html>
<html><body>

  <script type="text/javascript" src="webgl-utils.js"></script>
  <script type="text/javascript" src="initShaders.js"></script>

 <script id="vertex-shader" type="x-shader/x-vertex">
  attribute vec4 a_Position;
  attribute vec4 a_Normal;
  attribute vec4 a_Color;
  uniform mat4 projection;
  uniform mat4 view;
  uniform vec4 lightPos;
  uniform vec4 kd;
  uniform vec4 Li;
  varying vec4 v_Color;
  varying float theta;
  void main() {
    gl_Position = projection*view*a_Position;
    gl_PointSize = 10.0;
    vec4 pos = a_Position;
    vec3 w_i = lightPos.w == 0.0 ? normalize(-lightPos.xyz) : normalize(lightPos.xyz - pos.xyz);
    theta = dot(a_Normal,vec4(w_i,1));
    v_Color = theta > 0.0 ? vec4(kd[0]*Li[0],kd[1]*Li[1],kd[2]*Li[2],0.0)*theta : vec4(0.0,0.0,0.0,1.0) ;

  }
 </script>

 <script id="fragment-shader" type="x-shader/x-fragment">
  precision mediump float;
  varying vec4 v_Color;
  void main() {
    gl_FragColor = v_Color;
  }
</script>

<script type="text/javascript" src="MV.js"></script>
<script type="text/javascript" src="w4p3.js"></script>

<p>
<canvas id="canvas" width="512" height="512"></canvas>
</p>

<input type="button" id="incrementsub" value="Increment Subdiv" ></input>
<input type="button" id="decreasesub" value="Decrease Subdiv" ></input>
<input type="button" id="animate" value="Toggle animation" ></input>

  </body>
</html>
